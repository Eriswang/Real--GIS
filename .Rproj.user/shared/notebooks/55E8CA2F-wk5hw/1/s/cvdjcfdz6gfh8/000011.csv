"0","# library for pop up boxes (setting 3 pop up boxes:gii_2010, gii_2019 and difference)"
"0","library(leafpop)"
"0","library(leaflet)"
"0",""
"0","#avoid the geometry for our pop up boxes"
"0","popup_gii2010 <-giifinalmap %>%"
"0","  st_drop_geometry()%>%"
"0","  dplyr::select(`gii_2010`, country)%>%"
"0","  popupTable()"
"0",""
"0","popup_gii2019 <-giifinalmap %>%"
"0","  st_drop_geometry()%>%"
"0","  dplyr::select(`gii_2019`, country)%>%"
"0","  popupTable()"
"0",""
"0","popup_difference <-giifinalmap %>%"
"0","  st_drop_geometry()%>%"
"0","  dplyr::select(`difference`, country)%>%"
"0","  popupTable()"
"0",""
"0","tmap_mode(""view"")"
"2","tmap mode set to interactive viewing
"
"0","## set the colour palettes using our previous breaks"
"0",""
"0","breaks2=c(0,0.3,0.5,0.7,0.9,1)"
"0",""
"0","pal1 <- giifinalmap %>%"
"0","  colorBin(palette = ""YlOrRd"", domain=.$`gii_2010`, bins=breaks2)"
"0",""
"0","pal2 <- giifinalmap %>%"
"0","  colorBin(palette = ""YlOrRd"", domain=.$`gii_2019`, bins=breaks2)"
"0",""
"0","pal3 <- colorBin(palette = ""YlOrRd"", "
"0","                domain=giifinalmap$`difference`, bins=breaks)"
"0",""
"0","map<- leaflet(giifinalmap) %>%"
"0","  # add basemap options"
"0","  addTiles(group = ""OSM (default)"") %>%"
"0","  addProviderTiles(providers$Stamen.Toner, group = ""Toner"") %>%"
"0","  addProviderTiles(providers$Stamen.TonerLite, group = ""Toner Lite"") %>%"
"0","  addProviderTiles(providers$CartoDB.Positron, group = ""CartoDB"")%>%"
"0",""
"0","  #add our polygons, linking to the tables we just made"
"0","  addPolygons(color=""white"", "
"0","              weight = 2,"
"0","              opacity = 1,"
"0","              dashArray = ""3"","
"0","              popup = popup_gii2010,"
"0","              fillOpacity = 0.7,"
"0","              fillColor = ~pal1(`gii_2010`),"
"0","              group = ""gii_2010"") %>%"
"0","  "
"0","  addPolygons(fillColor = ~pal2(`gii_2019`), "
"0","              weight = 2,"
"0","              opacity = 1,"
"0","              color = ""white"","
"0","              dashArray = ""3"","
"0","              popup = popup_gii2019,"
"0","              fillOpacity = 0.7,"
"0","              group = ""gii_2019"") %>%"
"0",""
"0","  addPolygons(color=""white"", "
"0","              weight = 2,"
"0","              opacity = 1,"
"0","              dashArray = ""3"","
"0","              popup = popup_difference,"
"0","              fillOpacity = 0.7,"
"0","              fillColor = ~pal3(`difference`),"
"0","              group = ""difference"") %>%"
"0",""
"0","  # add a legend"
"0",""
"0","  addLegend(pal = pal3, values = ~`difference`, "
"0","            group = c(""gii_2010"",""gii_2019"",""difference""), "
"0","            position =""bottomleft"", title = ""gender inequality index"") %>%"
"0","  # specify layers control"
"0","  addLayersControl("
"0","    baseGroups = c(""OSM (default)"", ""Toner"", ""Toner Lite"", ""CartoDB""),"
"0","    overlayGroups = c(""gii_2010"", ""gii_2019"",""difference""),"
"0","    options = layersControlOptions(collapsed = FALSE)"
"0","  )"
"0","## plot the map"
"0","map"
